(()=>{let t,s,o;const a=async()=>{console.log("getcurrentTab");const[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});return s=e.url,console.log(e.id),chrome.tabs.sendMessage(e.id,e.url),{tab:e,change:!0}};chrome.tabs.onActivated.addListener(e=>{t=e.tabId,a()}),chrome.tabs.onUpdated.addListener((e,r,n)=>{t===e&&a()}),chrome.runtime.onMessage.addListener((e,r,n)=>{console.log("message received",e,r.tab.id),e==="getCurrentUrl"&&a()})})();
